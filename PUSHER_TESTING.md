# –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Pusher WebSocket

## –ß–µ–∫-–ª–∏—Å—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### ‚úÖ –≠—Ç–∞–ø 1-4: Backend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [x] Pusher secrets –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –ø—Ä–æ–µ–∫—Ç
- [x] pusher-js —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ frontend
- [x] pusher==3.3.2 –¥–æ–±–∞–≤–ª–µ–Ω –≤ backend/game-move/requirements.txt
- [x] Backend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Ö–æ–¥–∞
- [x] –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ /pusher-test —Ä–∞–±–æ—Ç–∞–µ—Ç

### ‚úÖ –≠—Ç–∞–ø 5: Frontend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [x] ChessBoard.tsx –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Pusher
- [x] –ü–æ–ª—É—á–µ–Ω–∏–µ —Ö–æ–¥–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- [x] –î–æ—Å–∫–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–æ–±—ã—Ç–∏—è

### ‚úÖ –≠—Ç–∞–ø 6: –£–¥–∞–ª–µ–Ω–∏–µ polling
- [x] OnlineChess.tsx –ø—Ä–æ–≤–µ—Ä–µ–Ω - –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–µ—Ç

### ‚úÖ –≠—Ç–∞–ø 7: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- [x] –°–æ–∑–¥–∞–Ω src/config/pusher.ts
- [x] –°–æ–∑–¥–∞–Ω—ã .env –∏ .env.example
- [x] Frontend –∏—Å–ø–æ–ª—å–∑—É–µ—Ç VITE_PUSHER_KEY –∏–∑ .env
- [x] Backend –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–µ–∫—Ä–µ—Ç—ã –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–æ–µ–∫—Ç–∞
- [x] .env –¥–æ–±–∞–≤–ª–µ–Ω –≤ .gitignore

### üß™ –≠—Ç–∞–ø 8: –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### –¢–µ—Å—Ç 1: –ë–∞–∑–æ–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Pusher
**–¶–µ–ª—å:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ Pusher –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä–æ–π `/pusher-test`
2. –î–æ–∂–¥–∏—Å—å —Å–æ–æ–±—â–µ–Ω–∏—è "‚úÖ Pusher –ø–æ–¥–∫–ª—é—á–µ–Ω!"
3. –ù–∞–∂–º–∏ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ"
4. –ü—Ä–æ–≤–µ—Ä—å –ø–æ—è–≤–ª–µ–Ω–∏–µ "üì© –ü–æ–ª—É—á–µ–Ω–æ: Pusher —Ä–∞–±–æ—Ç–∞–µ—Ç!"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ—è–≤–∏–ª–∏—Å—å

---

#### –¢–µ—Å—Ç 2: –ü–µ—Ä–µ–¥–∞—á–∞ —Ö–æ–¥–æ–≤ –º–µ–∂–¥—É –∏–≥—Ä–æ–∫–∞–º–∏ (–æ–¥–∏–Ω –±—Ä–∞—É–∑–µ—Ä)
**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∏–≥—Ä–æ–∫ –≤–∏–¥–∏—Ç —Å–≤–æ–π —Ö–æ–¥ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä–æ–π `/pusher-test`
2. –ù–∞–∂–º–∏ "‚ôüÔ∏è –¢–µ—Å—Ç —Ö–æ–¥–∞ –≤ –∏–≥—Ä–µ"
3. –û—Ç–∫—Ä–æ–π –∏–≥—Ä—É –ø–æ —Å—Å—ã–ª–∫–µ: https://preview--chess-support-world.poehali.dev/game/2f37d4bf-6c76-4f61-afb9-6851b8bc691b
4. –í–æ–π–¥–∏ –∫–∞–∫ –ò–ª—å—è –ú–æ–∑–∂–µ—Ä–∏–Ω (–±–µ–ª—ã–µ)
5. –°–¥–µ–ª–∞–π —Ö–æ–¥ e2-e4
6. –í–µ—Ä–Ω–∏—Å—å –Ω–∞ /pusher-test

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** 
- ‚úÖ –ù–∞ /pusher-test –ø–æ—è–≤–∏–ª–æ—Å—å "‚ôüÔ∏è –ü–û–õ–£–ß–ï–ù –•–û–î –ß–ï–†–ï–ó PUSHER!"
- ‚úÖ –í–∏–¥–Ω–∞ —á–∞—Å—Ç—å FEN –ø–æ–∑–∏—Ü–∏–∏

---

#### –¢–µ—Å—Ç 3: –ü–µ—Ä–µ–¥–∞—á–∞ —Ö–æ–¥–æ–≤ –º–µ–∂–¥—É –∏–≥—Ä–æ–∫–∞–º–∏ (–¥–≤–∞ –±—Ä–∞—É–∑–µ—Ä–∞) üéØ –ì–õ–ê–í–ù–´–ô
**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –º–µ–∂–¥—É –¥–≤—É–º—è —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∏–≥—Ä–æ–∫–∞–º–∏

**–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞:**
- –¢–µ—Å—Ç–æ–≤–∞—è –∏–≥—Ä–∞ —Å–±—Ä–æ—à–µ–Ω–∞ –≤ –Ω–∞—á–∞–ª—å–Ω—É—é –ø–æ–∑–∏—Ü–∏—é
- –ë–µ–ª—ã–µ: –ò–ª—å—è –ú–æ–∑–∂–µ—Ä–∏–Ω (user_id=10)
- –ß—ë—Ä–Ω—ã–µ: –ê–Ω–Ω–∞ –ú–æ–∑–∂–µ—Ä–∏–Ω–∞ (user_id=8)

**–®–∞–≥–∏:**
1. **–ë—Ä–∞—É–∑–µ—Ä 1** (Chrome): –í–æ–π–¥–∏ –∫–∞–∫ –ò–ª—å—è –ú–æ–∑–∂–µ—Ä–∏–Ω
   - –û—Ç–∫—Ä–æ–π –∏–≥—Ä—É: `/game/2f37d4bf-6c76-4f61-afb9-6851b8bc691b`
   
2. **–ë—Ä–∞—É–∑–µ—Ä 2** (Firefox/Incognito): –í–æ–π–¥–∏ –∫–∞–∫ –ê–Ω–Ω–∞ –ú–æ–∑–∂–µ—Ä–∏–Ω–∞
   - –û—Ç–∫—Ä–æ–π —Ç—É –∂–µ –∏–≥—Ä—É: `/game/2f37d4bf-6c76-4f61-afb9-6851b8bc691b`
   
3. **–ë—Ä–∞—É–∑–µ—Ä 1**: –°–¥–µ–ª–∞–π —Ö–æ–¥ e2-e4 (–±–µ–ª—ã–µ)
4. **–ë—Ä–∞—É–∑–µ—Ä 2**: –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ —Ö–æ–¥ –ø–æ—è–≤–∏–ª—Å—è –ú–ì–ù–û–í–ï–ù–ù–û (–±–µ–∑ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã)
5. **–ë—Ä–∞—É–∑–µ—Ä 2**: –°–¥–µ–ª–∞–π —Ö–æ–¥ e7-e5 (—á—ë—Ä–Ω—ã–µ)
6. **–ë—Ä–∞—É–∑–µ—Ä 1**: –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ —Ö–æ–¥ –ø–æ—è–≤–∏–ª—Å—è –ú–ì–ù–û–í–ï–ù–ù–û

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –•–æ–¥—ã –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ –æ–±–æ–∏—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö –±–µ–∑ –∑–∞–¥–µ—Ä–∂–∫–∏ (< 1 —Å–µ–∫)
- ‚úÖ –ù–µ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É
- ‚úÖ –î–æ—Å–∫–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ –°—Ç–∞—Ç—É—Å —Ö–æ–¥–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è ("–•–æ–¥: –ë–µ–ª—ã–µ" ‚Üí "–•–æ–¥: –ß—ë—Ä–Ω—ã–µ")

---

#### –¢–µ—Å—Ç 4: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ backend
**–¶–µ–ª—å:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å–æ–±—ã—Ç–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∏–∑ backend

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä–æ–π –ª–æ–≥–∏ backend: –ø—Ä–æ–≤–µ—Ä—å —á–µ—Ä–µ–∑ get_logs –∏–ª–∏ –∫–æ–Ω—Å–æ–ª—å
2. –°–¥–µ–ª–∞–π —Ö–æ–¥ –≤ –ª—é–±–æ–π –∏–≥—Ä–µ
3. –ù–∞–π–¥–∏ —Å–æ–æ–±—â–µ–Ω–∏—è "[PUSHER]" –≤ –ª–æ–≥–∞—Ö

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –í–∏–¥–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏—è "[PUSHER] –ù–∞—á–∏–Ω–∞—é –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–±—ã—Ç–∏—è –¥–ª—è –∏–≥—Ä—ã..."
- ‚úÖ –í–∏–¥–Ω–æ "[PUSHER] –ö–ª–∏–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω, –æ—Ç–ø—Ä–∞–≤–ª—è—é –Ω–∞ –∫–∞–Ω–∞–ª..."
- ‚úÖ –í–∏–¥–Ω–æ "[PUSHER] –°–æ–±—ã—Ç–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ! –†–µ–∑—É–ª—å—Ç–∞—Ç: {...}"
- ‚úÖ –ù–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π "[PUSHER] –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏"

---

#### –¢–µ—Å—Ç 5: –†–∞–±–æ—Ç–∞ –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∏–≥—Ä—ã
**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ Pusher –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –º–∞—Ç–µ/–Ω–∏—á—å–µ–π

**–®–∞–≥–∏:**
1. –°–æ–∑–¥–∞–π –Ω–æ–≤—É—é –∏–≥—Ä—É
2. –°—ã–≥—Ä–∞–π –ø–∞—Ä—Ç–∏—é –¥–æ –º–∞—Ç–∞ (–±—ã—Å—Ç—Ä—ã–π –º–∞—Ç –¥—É—Ä–∞–∫–∞)
3. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ö–æ–¥ —Å –º–∞—Ç–æ–º –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ Pusher
4. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ —Å—Ç–∞—Ç—É—Å –∏–≥—Ä—ã –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ü–æ—Å–ª–µ–¥–Ω–∏–π —Ö–æ–¥ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ Pusher
- ‚úÖ –°—Ç–∞—Ç—É—Å "–ú–∞—Ç!" –ø–æ—è–≤–ª—è–µ—Ç—Å—è —É –æ–±–æ–∏—Ö –∏–≥—Ä–æ–∫–æ–≤
- ‚úÖ –ò–≥—Ä–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–æ–≤

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤:

1. ‚úÖ –£–¥–∞–ª–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑ backend/game-move/index.py (—Å—Ç—Ä–æ–∫–∏ —Å `print('[PUSHER]')`)
2. ‚úÖ –û—Å—Ç–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É /pusher-test –¥–ª—è –±—É–¥—É—â–µ–π –æ—Ç–ª–∞–¥–∫–∏
3. ‚úÖ –ó–∞–¥–µ–ø–ª–æ–∏—Ç—å —Ñ–∏–Ω–∞–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é

---

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- Pusher —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–º –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏
- –ü—Ä–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏ –æ—Ç Pusher –∏–≥—Ä–∞ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å, –Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±—É–¥—É—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω Pusher: –¥–æ 200k —Å–æ–æ–±—â–µ–Ω–∏–π/–¥–µ–Ω—å, 100 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. –î–æ–±–∞–≤–∏—Ç—å reconnection logic –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
2. –î–æ–±–∞–≤–∏—Ç—å –≤–∏–∑—É–∞–ª—å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è Pusher –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∏–≥—Ä—ã
3. –î–æ–±–∞–≤–∏—Ç—å graceful fallback –Ω–∞ polling –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å Pusher
